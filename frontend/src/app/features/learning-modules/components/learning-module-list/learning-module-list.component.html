<div class="container">
  <header class="header">
    <h1>Learning Modules</h1>
    <p class="subtitle">Track your learning progress</p>
  </header>

  <!-- Filter Section -->
  <div class="controls-section">
    <div class="filter-container">
      <label for="category-select" class="filter-label">Category</label>
      <div class="select-wrapper">
        <select id="category-select" (change)="onCategoryChange($event)" [value]="selectedCategory || ''" aria-label="Filter modules by category">
          <option value="">All categories</option>
          <option *ngFor="let c of categories$ | async" [value]="c">{{ c }}</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Progress Summary -->
  <app-progress-summary [summary]="(progressSummary$ | async)"></app-progress-summary>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Loading modules...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error">
    <span class="error-icon">⚠️</span>
    <span>{{ error }}</span>
  </div>

  <!-- Module List -->
  <div *ngIf="!(loading || error)" class="module-list">
    <ng-container *ngFor="let module of modules$ | async">
      <app-module-card [module]="module" (toggleCompletion)="onToggleCompletion($event.id, $event.currentStatus)"></app-module-card>
    </ng-container>
  </div>
</div>
